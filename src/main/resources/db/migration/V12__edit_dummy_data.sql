-- ============================================
-- 1. 기존 데이터 정리 (외래키 순서 주의!)
-- ============================================
SET FOREIGN_KEY_CHECKS = 0;

DELETE FROM refund;
DELETE FROM order_product;
DELETE FROM orders;
DELETE FROM category_product;
DELETE FROM product;
DELETE FROM category;
DELETE FROM users;

SET FOREIGN_KEY_CHECKS = 1;

-- ============================================
-- 2. AUTO_INCREMENT 리셋
-- ============================================
ALTER TABLE users AUTO_INCREMENT = 1;
ALTER TABLE orders AUTO_INCREMENT = 1;
ALTER TABLE order_product AUTO_INCREMENT = 1;
ALTER TABLE refund AUTO_INCREMENT = 1;

-- ============================================
-- 3. 사용자 데이터 (7명) - 비밀번호 모두 1234
-- ============================================
INSERT INTO users (id, username, email, password_hash, address, role_id) VALUES
    (1, 'admin', 'admin@test.com', '1234', 'Seoul Gangnam', 2),
    (2, 'jiyeon', 'jy@test.com', '1234', 'Seoul Mapo', 1),
    (3, 'mina', 'mina@test.com', '1234', 'Busan Haeundae', 1),
    (4, 'soyeon', 'soyeon@test.com', '1234', 'Incheon Songdo', 1),
    (5, 'jihoon', 'jihoon@test.com', '1234', 'Seoul Gangnam', 1),
    (6, 'yuna', 'yuna@test.com', '1234', 'Daegu Suseong', 1),
    (7, 'guest', 'guest@test.com', '1234', 'Seoul Jongno', 3);

-- ============================================
-- 4. 카테고리 데이터 (의류 전문 3단계 계층)
-- ============================================

-- 1단계: 대분류
INSERT INTO category (id, name, description, parent_id) VALUES
    (1, '여성의류', '여성 의류 전체', NULL),
    (2, '남성의류', '남성 의류 전체', NULL),
    (3, '아동의류', '아동 의류 전체', NULL),
    (4, '언더웨어', '속옷 및 이너웨어', NULL),
    (5, '액세서리', '패션 액세서리', NULL);

-- 2단계: 중분류
INSERT INTO category (id, name, description, parent_id) VALUES
    (10, '상의', '여성 상의', 1),
    (11, '하의', '여성 하의', 1),
    (12, '원피스', '여성 원피스', 1),
    (13, '아우터', '여성 아우터', 1),
    (14, '정장', '여성 정장', 1),
    (20, '상의', '남성 상의', 2),
    (21, '하의', '남성 하의', 2),
    (22, '아우터', '남성 아우터', 2),
    (23, '정장', '남성 정장', 2),
    (30, '여아의류', '여자 아동 의류', 3),
    (31, '남아의류', '남자 아동 의류', 3),
    (32, '유아의류', '유아 의류', 3),
    (40, '여성속옷', '여성 속옷', 4),
    (41, '남성속옷', '남성 속옷', 4),
    (50, '가방', '가방', 5),
    (51, '모자', '모자', 5),
    (52, '벨트', '벨트', 5),
    (53, '양말', '양말', 5);

-- 3단계: 소분류
INSERT INTO category (id, name, description, parent_id) VALUES
    (100, '티셔츠', '여성 티셔츠', 10),
    (101, '블라우스', '여성 블라우스', 10),
    (102, '셔츠', '여성 셔츠', 10),
    (103, '니트/스웨터', '여성 니트/스웨터', 10),
    (104, '후드티/맨투맨', '여성 후드티/맨투맨', 10),
    (110, '청바지', '여성 청바지', 11),
    (111, '슬랙스', '여성 슬랙스', 11),
    (112, '스커트', '여성 스커트', 11),
    (113, '레깅스', '여성 레깅스', 11),
    (120, '미니원피스', '미니 원피스', 12),
    (121, '미디원피스', '미디 원피스', 12),
    (122, '맥시원피스', '맥시 원피스', 12),
    (130, '코트', '여성 코트', 13),
    (131, '자켓', '여성 자켓', 13),
    (132, '패딩', '여성 패딩', 13),
    (133, '가디건', '여성 가디건', 13),
    (140, '정장세트', '여성 정장 세트', 14),
    (141, '정장재킷', '여성 정장 재킷', 14),
    (200, '티셔츠', '남성 티셔츠', 20),
    (201, '셔츠', '남성 셔츠', 20),
    (202, '니트/스웨터', '남성 니트/스웨터', 20),
    (203, '후드티/맨투맨', '남성 후드티/맨투맨', 20),
    (210, '청바지', '남성 청바지', 21),
    (211, '슬랙스', '남성 슬랙스', 21),
    (212, '트레이닝팬츠', '남성 트레이닝팬츠', 21),
    (220, '코트', '남성 코트', 22),
    (221, '자켓', '남성 자켓', 22),
    (222, '패딩', '남성 패딩', 22),
    (230, '정장세트', '남성 정장 세트', 23),
    (231, '정장재킷', '남성 정장 재킷', 23);

-- ============================================
-- 5. 상품 데이터 (50개)
-- ============================================

-- 여성 상의 (10개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (1001, '베이직 화이트 티셔츠', '순면 100%, 데일리 기본 티셔츠', 19900, 150, 'IN_STOCK'),
    (1002, '오버핏 라운드 티셔츠', '루즈핏, 5가지 컬러', 24900, 120, 'IN_STOCK'),
    (1003, '프릴 블라우스', '쉬폰 소재, 로맨틱 스타일', 39900, 80, 'IN_STOCK'),
    (1004, '여성 린넨 셔츠', '100% 린넨, 여름용', 45900, 60, 'IN_STOCK'),
    (1005, '캐시미어 니트', '30% 캐시미어, 고급 소재', 89000, 40, 'IN_STOCK'),
    (1006, '터틀넥 스웨터', '기모 안감, 보온성 우수', 34900, 90, 'IN_STOCK'),
    (1007, '후드 집업', '기모 안감, 오버핏', 42900, 70, 'IN_STOCK'),
    (1008, '맨투맨 스웨트셔츠', '기본 맨투맨, 7가지 컬러', 29900, 130, 'IN_STOCK'),
    (1009, '크롭 니트 가디건', '숏 기장, 버튼형', 38900, 55, 'IN_STOCK'),
    (1010, 'V넥 베이직 티셔츠', '슬림핏, 모달 소재', 22900, 100, 'IN_STOCK');

-- 여성 하의 (8개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (1101, '스키니 청바지', '스트레치 데님, 블랙/블루', 49900, 85, 'IN_STOCK'),
    (1102, '와이드 청바지', '루즈핏, 연청', 54900, 70, 'IN_STOCK'),
    (1103, '여성 슬림 슬랙스', '정장용, 블랙/네이비', 39900, 65, 'IN_STOCK'),
    (1104, '플레어 스커트', '미디 기장, 체크/플레인', 32900, 90, 'IN_STOCK'),
    (1105, '플리츠 스커트', '롱 기장, 우아한 스타일', 44900, 55, 'IN_STOCK'),
    (1106, '하이웨이스트 레깅스', '운동용, 신축성 좋음', 27900, 120, 'IN_STOCK'),
    (1107, '린넨 와이드 팬츠', '여름용, 베이지/화이트', 42900, 60, 'IN_STOCK'),
    (1108, '데님 미니스커트', '캐주얼, A라인', 35900, 75, 'IN_STOCK');

-- 여성 원피스 (8개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (1201, '플라워 미니원피스', '플로럴 패턴, 봄/여름', 59900, 50, 'IN_STOCK'),
    (1202, '셔츠 원피스', '미디 기장, 벨트 포함', 64900, 45, 'IN_STOCK'),
    (1203, '니트 원피스', '롱 기장, 겨울용', 79900, 35, 'IN_STOCK'),
    (1204, '트위드 원피스', '샤넬 스타일, 고급스러움', 129000, 25, 'IN_STOCK'),
    (1205, '랩 원피스', '미디 기장, 허리 강조', 54900, 60, 'IN_STOCK'),
    (1206, '맥시 원피스', '리조트룩, 시원한 소재', 69900, 40, 'IN_STOCK'),
    (1207, '레이스 원피스', '로맨틱, 웨딩 게스트룩', 89000, 30, 'IN_STOCK'),
    (1208, '린넨 원피스', '내추럴, 여름 데일리', 49900, 70, 'IN_STOCK');

-- 여성 아우터 (8개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (1301, '트렌치 코트', '베이직 베이지, 클래식', 159000, 20, 'IN_STOCK'),
    (1302, '여성 울 코트', '더블 버튼, 겨울용', 189000, 15, 'LOW_STOCK'),
    (1303, '가죽 라이더 자켓', '양가죽, 블랙', 249000, 10, 'LOW_STOCK'),
    (1304, '여성 데님 자켓', '빈티지 워싱, 블루', 79900, 50, 'IN_STOCK'),
    (1305, '여성 롱 패딩', '구스다운, 보온성 최고', 229000, 25, 'IN_STOCK'),
    (1306, '여성 숏 패딩', '오버핏, 캐주얼', 149000, 35, 'IN_STOCK'),
    (1307, '니트 가디건', '롱 기장, 포근함', 54900, 60, 'IN_STOCK'),
    (1308, '블레이저', '정장용, 블랙/베이지', 89000, 45, 'IN_STOCK');

-- 여성 정장 (4개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (1401, '여성 투피스 정장세트', '재킷+스커트, 블랙', 179000, 20, 'IN_STOCK'),
    (1402, '여성 팬츠 정장세트', '재킷+팬츠, 네이비', 189000, 18, 'IN_STOCK'),
    (1403, '트위드 정장 재킷', '샤넬 스타일', 129000, 25, 'IN_STOCK'),
    (1404, '여성 정장 슬랙스', '스트레치, 블랙/그레이', 69000, 40, 'IN_STOCK');

-- 남성 상의 (8개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (2001, '베이직 라운드 티셔츠', '순면, 5가지 컬러', 19900, 200, 'IN_STOCK'),
    (2002, '오버핏 반팔 티셔츠', '루즈핏, 여름용', 24900, 150, 'IN_STOCK'),
    (2003, '옥스퍼드 셔츠', '면 100%, 화이트/블루', 39900, 80, 'IN_STOCK'),
    (2004, '남성 린넨 셔츠', '여름용, 베이지/화이트', 49900, 60, 'IN_STOCK'),
    (2005, '케이블 니트', '울 혼방, 겨울용', 69000, 50, 'IN_STOCK'),
    (2006, '남성 터틀넥 니트', '기본 니트, 블랙/그레이', 44900, 70, 'IN_STOCK'),
    (2007, '기본 후드티', '기모 안감, 오버핏', 39900, 120, 'IN_STOCK'),
    (2008, '남성 맨투맨', '무지 맨투맨, 8가지 컬러', 29900, 180, 'IN_STOCK');

-- 남성 하의 (6개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (2101, '남성 슬림 청바지', '스트레치 데님, 블루/블랙', 59900, 100, 'IN_STOCK'),
    (2102, '레귤러 청바지', '클래식핏, 인디고', 54900, 90, 'IN_STOCK'),
    (2103, '남성 정장 슬랙스', '면 혼방, 블랙/네이비', 49900, 70, 'IN_STOCK'),
    (2104, '치노 팬츠', '캐주얼, 베이지/카키', 44900, 85, 'IN_STOCK'),
    (2105, '트레이닝 팬츠', '조거팬츠, 블랙/그레이', 34900, 110, 'IN_STOCK'),
    (2106, '카고 팬츠', '빅 포켓, 밀리터리룩', 52900, 65, 'IN_STOCK');

-- 남성 아우터 (6개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (2201, '남성 울 코트', '싱글 버튼, 캐멀/블랙', 189000, 20, 'IN_STOCK'),
    (2202, '체스터 코트', '롱 기장, 네이비', 169000, 18, 'IN_STOCK'),
    (2203, 'MA-1 자켓', '항공 점퍼, 블랙/카키', 89000, 45, 'IN_STOCK'),
    (2204, '남성 데님 자켓', '빈티지 워싱', 79900, 50, 'IN_STOCK'),
    (2205, '남성 롱 패딩', '구스다운, 블랙', 249000, 25, 'IN_STOCK'),
    (2206, '남성 숏 패딩', '오버핏, 블랙/네이비', 159000, 35, 'IN_STOCK');

-- 남성 정장 (4개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (2301, '남성 투피스 정장세트', '재킷+팬츠, 블랙/네이비', 299000, 15, 'IN_STOCK'),
    (2302, '슬림핏 정장세트', '모던한 핏, 차콜그레이', 329000, 12, 'LOW_STOCK'),
    (2303, '남성 정장 재킷', '울 혼방, 블랙', 189000, 20, 'IN_STOCK'),
    (2304, '남성 정장 팬츠', '노턱, 블랙/네이비', 89000, 35, 'IN_STOCK');

-- 액세서리 (8개)
INSERT INTO product (id, name, description, price, stock, stock_status) VALUES
    (5001, '크로스백', '가죽, 블랙/브라운', 129000, 30, 'IN_STOCK'),
    (5002, '토트백', '캔버스, 에코백', 39900, 80, 'IN_STOCK'),
    (5003, '백팩', '나일론, 캐주얼', 89000, 50, 'IN_STOCK'),
    (5004, '버킷햇', '코튼, 5가지 컬러', 24900, 100, 'IN_STOCK'),
    (5005, '볼캡', '자수 로고, 블랙/네이비', 19900, 120, 'IN_STOCK'),
    (5006, '가죽 벨트', '남성용, 블랙/브라운', 39900, 60, 'IN_STOCK'),
    (5007, '코튼 양말 5족', '발목 양말, 화이트/블랙', 14900, 200, 'IN_STOCK'),
    (5008, '니트 머플러', '겨울용, 7가지 컬러', 29900, 90, 'IN_STOCK');

-- ============================================
-- 6. 카테고리-상품 매핑
-- ============================================
INSERT INTO category_product (category_id, product_id) VALUES
    (100, 1001),
    (100, 1002),
    (100, 1010),
    (101, 1003),
    (102, 1004),
    (103, 1005),
    (103, 1006),
    (103, 1009),
    (104, 1007),
    (104, 1008),
    (110, 1101),
    (110, 1102),
    (111, 1103),
    (111, 1107),
    (112, 1104),
    (112, 1105),
    (112, 1108),
    (113, 1106),
    (120, 1201),
    (121, 1202),
    (121, 1204),
    (121, 1205),
    (122, 1203),
    (122, 1206),
    (122, 1207),
    (122, 1208),
    (130, 1301),
    (130, 1302),
    (131, 1303),
    (131, 1304),
    (131, 1308),
    (132, 1305),
    (132, 1306),
    (133, 1307),
    (140, 1401),
    (140, 1402),
    (141, 1403),
    (200, 2001),
    (200, 2002),
    (201, 2003),
    (201, 2004),
    (202, 2005),
    (202, 2006),
    (203, 2007),
    (203, 2008),
    (210, 2101),
    (210, 2102),
    (211, 2103),
    (211, 2104),
    (212, 2105),
    (212, 2106),
    (220, 2201),
    (220, 2202),
    (221, 2203),
    (221, 2204),
    (222, 2205),
    (222, 2206),
    (230, 2301),
    (230, 2302),
    (231, 2303),
    (50, 5001),
    (50, 5002),
    (50, 5003),
    (51, 5004),
    (51, 5005),
    (52, 5006),
    (53, 5007), (53, 5008);

-- ============================================
-- 7. 주문 데이터 (15개 주문)
-- ============================================
INSERT INTO orders (id, user_id, status, order_date, total_price) VALUES
    (1, 2, 'COMPLETED', '2025-11-01 10:30:00', 109800),
    (2, 2, 'COMPLETED', '2025-11-10 14:20:00', 159000),
    (3, 2, 'PENDING',   '2025-11-23 09:15:00', 59900),
    (4, 2, 'COMPLETED', '2025-11-15 16:30:00', 89000),
    (5, 3, 'COMPLETED', '2025-11-05 11:20:00', 179000),
    (6, 3, 'COMPLETED', '2025-11-12 15:45:00', 124800),
    (7, 3, 'CANCELED',  '2025-11-20 13:30:00', 249000),
    (8, 4, 'COMPLETED', '2025-11-08 10:00:00', 134800),
    (9, 4, 'PENDING',   '2025-11-22 14:15:00', 229000),
    (10, 4, 'COMPLETED', '2025-11-18 16:20:00', 69900),
    (11, 5, 'COMPLETED', '2025-11-07 11:30:00', 299000),
    (12, 5, 'COMPLETED', '2025-11-14 13:45:00', 104800),
    (13, 5, 'PENDING',   '2025-11-24 10:20:00', 89000),
    (14, 6, 'COMPLETED', '2025-11-16 12:00:00', 188000),
    (15, 6, 'PENDING',   '2025-11-25 15:30:00', 129000);

-- ============================================
-- 8. 주문-상품 상세 데이터
-- ============================================
INSERT INTO order_product (order_id, product_id, order_price, count) VALUES
    (1, 1001, 19900, 2),
    (1, 1101, 49900, 1),
    (1, 1002, 24900, 1),
    (2, 1301, 159000, 1),
    (3, 1201, 59900, 1),
    (4, 1005, 89000, 1),
    (5, 1401, 179000, 1),
    (6, 1003, 39900, 1),
    (6, 1104, 32900, 1),
    (6, 1106, 27900, 2),
    (7, 1303, 249000, 1),
    (8, 1202, 64900, 1),
    (8, 1307, 54900, 1),
    (8, 5008, 29900, 1),
    (9, 1305, 229000, 1),
    (10, 1206, 69900, 1),
    (11, 2301, 299000, 1),
    (12, 2003, 39900, 1),
    (12, 2104, 44900, 1),
    (12, 5006, 39900, 1),
    (13, 2203, 89000, 1),
    (14, 1203, 79900, 1),
    (14, 5002, 39900, 1),
    (14, 5007, 14900, 2),
    (14, 5004, 24900, 1),
    (15, 1204, 129000, 1);

-- ============================================
-- 9. 환불 데이터 (2건)
-- ============================================
INSERT INTO refund (user_id, order_id, status, reason, refund_amount, processed_at, processed_by) VALUES
    (3, 7, 'APPROVED', '사이즈가 맞지 않아 환불 요청합니다.', 249000, '2025-11-21 10:00:00', 1),
    (4, 8, 'PENDING', '가디건 색상 불량으로 교환 대신 환불 요청', 54900, NULL, NULL);

-- order_product 테이블의 count 컬럼을 quantity로 변경
ALTER TABLE order_product
CHANGE COLUMN count quantity INT NOT NULL;